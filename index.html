<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Money Tracking App</title>
    <link rel="icon" type="image/png" href="public/images/logo.png" />
    <link rel="stylesheet" href="public/styles/base.css" />
    <script type="module" src="public/scripts/app.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header>
        <img src="public/images/logo.png" alt="Logo" class="logo" />
        <div class="title-warp">
          <h1>Money Tracking App</h1>
          <p>Qu·∫£n l√Ω chi ti√™u hi·ªáu qu·∫£</p>
        </div>
        <div class="head-action-warp">
          <button
            class="head-action-button focus-ring fade"
            id="btnToggleTheme"
          >
            ‚òÄÔ∏è
          </button>
          <!-- üåô -->
          <button class="head-action-button focus-ring fade" id="btnSettings">
            C√†i ƒë·∫∑t
          </button>
          <button class="head-action-button focus-ring fade" id="btnLogin">
            ƒêƒÉng nh·∫≠p
          </button>
        </div>
      </header>

      <!-- Summary Card -->
      <section class="summaryGrid">
        <div class="summaryCard">
          <p id="lblToday">H√¥m nay</p>
          <p id="sumToday">0 VND</p>
        </div>
        <div class="summaryCard">
          <p id="lblTomorrow">Ng√†y mai</p>
          <p id="sumTomorrow">0 VND</p>
        </div>
        <div class="summaryCard">
          <p id="lblThisWeek">Tu·∫ßn n√†y</p>
          <p id="sumWeek">0 VND</p>
        </div>
        <div class="summaryCard">
          <p id="lblThisMonth">Th√°ng n√†y</p>
          <p id="sumMonth">0 VND</p>
        </div>
      </section>

      <!-- Filters & Actions -->
      <section class="filters-actions">
        <div class="search-box">
          <label id="lblSearch" class="lblSearch" for="search">T√¨m ki·∫øm</label>
          <input
            type="text"
            id="search"
            class="search-input focus-ring fade"
            placeholder="Ghi ch√∫, kh√°ch h√†ng, ngu·ªìn, ..."
          />
        </div>
        <div class="actions">
          <div class="action-item">
            <label id="lblFrom" for="fromDate">T·ª´ ng√†y</label>
            <input type="date" id="fromDate" class="focus-ring fade" />
          </div>
          <div class="action-item">
            <label id="lblTo" for="toDate">ƒê·∫øn ng√†y</label>
            <input type="date" id="toDate" class="focus-ring fade" />
          </div>
          <div class="action-item">
            <label id="lblSort" for="sort">S·∫Øp x·∫øp</label>
            <select id="sort" class="focus-ring fade">
              <option id="optNewest" value="newest">M·ªõi nh·∫•t</option>
              <option id="optOldest" value="oldest">C≈© nh·∫•t</option>
              <option id="optAmountDesc" value="amountDesc">S·ªë ti·ªÅn ‚Üì</option>
              <option id="optAmountAsc" value="amountAsc">S·ªë ti·ªÅn ‚Üë</option>
            </select>
          </div>
          <div class="action-item">
            <button id="btnClearFilters" class="action-button focus-ring fade">
              Xo√° l·ªçc
            </button>
          </div>
        </div>
      </section>

      <!-- Select & delete bar -->
      <div class="select-delete">
        <span class="lblSelectedCount" id="lblSelectedCount"
          >0 m·ª•c ƒë√£ ch·ªçn</span
        >
        <div class="select-delete-button-group">
          <button id="btnSelectAll" class="select-all-button focus-ring fade">
            Ch·ªçn t·∫•t c·∫£
          </button>
          <button id="btnDeleteSelected" class="delete-button focus-ring fade">
            X√≥a ƒë√£ ch·ªçn
          </button>
        </div>
      </div>

      <!-- Entries -->
      <section class="entries" id="entries"></section>

      <!-- Floating Add Button -->
      <button id="fab" title="Add Tip" class="fab focus-ring fade">
        + Th√™m tip
      </button>
    </div>

    <!-- Entry dialog -->
    <dialog id="entryDialog">
      <form method="dialog" id="entryForm">
        <div class="dlg-head">
          <h2 id="dialogTitle" class="dlg-title">Th√™m tip</h2>
          <p class="dlg-sub">
            Quy t·∫Øc ng√†y:
            <span id="logicDesc" style="font-weight: 600"
              >Ghi cho ng√†y mai</span
            >
          </p>
        </div>

        <div class="dlg-body">
          <input type="hidden" id="entryId" />

          <!-- S·ªë ti·ªÅn -->
          <div class="field">
            <label id="lblAmount" class="flabel" for="amount"
              >S·ªë ti·ªÅn (VND)</label
            >
            <div class="amount">
              <input
                id="amount"
                inputmode="numeric"
                placeholder="0"
                class="amount-prefix focus-ring fade"
              />
            </div>
            <div class="quick-buttons">
              <button
                type="button"
                data-quick="5000"
                class="quick focus-ring fade"
              >
                +5k
              </button>
              <button
                type="button"
                data-quick="10000"
                class="quick focus-ring fade"
              >
                +10k
              </button>
              <button
                type="button"
                data-quick="20000"
                class="quick focus-ring fade"
              >
                +20k
              </button>
              <button
                type="button"
                data-quick="50000"
                class="quick focus-ring fade"
              >
                +50k
              </button>
              <button
                type="button"
                data-quick="100000"
                class="quick focus-ring fade"
              >
                +100k
              </button>
              <button
                type="button"
                data-quick="200000"
                class="quick focus-ring fade"
              >
                +200k
              </button>
              <button
                type="button"
                data-quick="-5000"
                class="quick focus-ring fade"
              >
                -5k
              </button>
              <button
                type="button"
                data-quick="-10000"
                class="quick focus-ring fade"
              >
                -10k
              </button>
            </div>
          </div>

          <!-- Ng√†y nh·∫≠p + ng√†y t√≠nh -->
          <div class="field">
            <label id="lblInputDate" class="flabel" for="inputDate"
              >Ng√†y nh·∫≠p (h√¥m nay)</label
            >
            <input
              id="inputDate"
              type="date"
              class="inputDate focus-ring fade"
            />
            <div class="record">
              <label class="pill">
                <input
                  id="recordTomorrow"
                  type="checkbox"
                  style="width: 16px; height: 16px"
                />
                <span id="lblRecordTomorrow" style="font-size: 14px"
                  >Ghi cho ng√†y mai (m·∫∑c ƒë·ªãnh)</span
                >
              </label>
              <div class="muted">
                <span id="lblIntendedLabel">Ng√†y t√≠nh:</span>
                <span id="intendedPreview">‚Äî</span>
              </div>
            </div>

            <div class="field">
              <label id="lblOverride" class="flabel" for="intendedDate"
                >Ch·ªânh ng√†y t√≠nh (tu·ª≥ ch·ªçn)</label
              >
              <input
                id="intendedDate"
                type="date"
                class="intendedDate focus-ring fade"
              />
              <p id="lblOverrideDesc" class="muted">
                M·∫∑c ƒë·ªãnh: ng√†y t√≠nh = ng√†y nh·∫≠p + 1 khi b·∫≠t "Ghi cho ng√†y mai".
              </p>
            </div>
          </div>

          <!-- Ngu·ªìn kh√°ch h√†ng (select t·ª´ Settings) -->
          <div class="field">
            <div
              style="
                display: flex;
                justify-content: space-between;
                align-items: center;
              "
            >
              <label class="flabel" for="sourceSelect">Ngu·ªìn kh√°ch h√†ng</label>
              <!-- <span class="link" id="lnkManageSettings1">Qu·∫£n l√Ω danh m·ª•c</span> -->
            </div>
            <select
              id="sourceSelect"
              class="sourceSelect focus-ring fade"
            ></select>
          </div>

          <!-- N∆°i l∆∞u tr·ªØ ti·ªÅn (select t·ª´ Settings) -->
          <div class="field">
            <label class="flabel" for="storageSelect">N∆°i l∆∞u tr·ªØ ti·ªÅn</label>
            <select
              id="storageSelect"
              class="storageSelect focus-ring fade"
            ></select>
          </div>

          <!-- Ng√¢n h√†ng (select t·ª´ Settings, ch·ªâ hi·ªán khi storage = transfer) -->
          <div class="field" id="bankWrap" style="display: none">
            <label class="flabel" for="bankSelect">Ng√¢n h√†ng</label>
            <select id="bankSelect" class="focus-ring fade"></select>
          </div>

          <!-- Kh√°ch h√†ng -->
          <div class="field">
            <label id="lblClient" class="flabel" for="client">Kh√°ch h√†ng</label>
            <input
              id="client"
              placeholder="T√™n kh√°ch (tu·ª≥ ch·ªçn)"
              class="client-input focus-ring fade"
            />
          </div>

          <!-- Ghi ch√∫ -->
          <div class="field">
            <label id="lblNote" class="flabel" for="note">Ghi ch√∫</label>
            <input
              id="note"
              placeholder="Kh√°ch / ca / ghi ch√∫‚Ä¶"
              class="note-input focus-ring fade"
            />
          </div>
        </div>

        <div class="dlg-foot">
          <button
            id="btnCancel"
            type="button"
            class="btnCancel focus-ring fade"
          >
            H·ªßy
          </button>
          <button id="btnSave" value="default" class="btnSave focus-ring fade">
            L∆∞u
          </button>
        </div>
      </form>
    </dialog>

    <!-- Settings Hub (m·ªü t·ª´ n√∫t C√†i ƒë·∫∑t tr√™n header) -->
    <dialog id="settingsHubDialog">
      <form method="dialog" id="settingsHubForm">
        <div class="dlg-head">
          <h2 class="dlg-title">C√†i ƒë·∫∑t</h2>
        </div>

        <div class="dlg-body">
          <button
            type="button"
            id="btnOpenCategoryManager"
            class="setting-button focus-ring fade"
            style="width: 100%"
          >
            Qu·∫£n l√Ω danh m·ª•c
          </button>
        </div>

        <div class="dlg-foot">
          <button
            id="btnCloseSettingsHub"
            type="button"
            class="btnCancel focus-ring fade"
          >
            ƒê√≥ng
          </button>
        </div>
      </form>
    </dialog>

    <!-- Category Management -->
    <dialog id="categoryManagerDialog">
      <form method="dialog" id="categoryManagerForm">
        <div class="dlg-head">
          <h2 class="dlg-title">Qu·∫£n l√Ω danh m·ª•c</h2>
          <p class="dlg-sub">
            Th√™m, xo√°, ƒë·∫∑t m·∫∑c ƒë·ªãnh cho Ngu·ªìn/L∆∞u tr·ªØ/Ng√¢n h√†ng
          </p>
        </div>

        <div class="dlg-body settings-grid">
          <!-- Ngu·ªìn kh√°ch h√†ng -->
          <div class="card">
            <h3>Ngu·ªìn kh√°ch h√†ng</h3>
            <div class="sourcesList" id="sourcesList"></div>
            <div class="inline-form">
              <input
                class="inpNewSource focus-ring fade"
                id="inpNewSource"
                placeholder="Th√™m ngu·ªìn m·ªõi‚Ä¶"
              />
              <button
                type="button"
                id="btnAddSource"
                class="btnAddSource focus-ring fade"
              >
                Th√™m
              </button>
            </div>
            <div class="inline-form">
              <label class="muted" for="selDefaultSource">M·∫∑c ƒë·ªãnh</label>
              <select
                class="selDefaultSource focus-ring fade"
                id="selDefaultSource"
              ></select>
            </div>
          </div>

          <!-- N∆°i l∆∞u tr·ªØ ti·ªÅn -->
          <div class="card">
            <h3>N∆°i l∆∞u tr·ªØ ti·ªÅn</h3>
            <div id="storagesList"></div>
            <div class="inline-form">
              <input
                class="inpNewStorageName focus-ring fade"
                id="inpNewStorageName"
                placeholder="T√™n n∆°i l∆∞u tr·ªØ (VD: Ti·ªÅn m·∫∑t, Chuy·ªÉn kho·∫£n‚Ä¶)"
              />
              <select
                class="selNewStorageKind focus-ring fade"
                id="selNewStorageKind"
              >
                <option value="cash">Ti·ªÅn m·∫∑t</option>
                <option value="transfer">Chuy·ªÉn kho·∫£n (c·∫ßn ng√¢n h√†ng)</option>
              </select>
              <button
                type="button"
                id="btnAddStorage"
                class="btnAddStorage focus-ring fade"
              >
                Th√™m
              </button>
            </div>
            <div class="inline-form">
              <label
                class="muted-sm"
                for="selDefaultStorage"
                style="min-width: 120px"
                >M·∫∑c ƒë·ªãnh</label
              >
              <select
                class="selDefaultStorage focus-ring fade"
                id="selDefaultStorage"
              ></select>
            </div>
          </div>

          <!-- Ng√¢n h√†ng -->
          <div class="card">
            <h3>Ng√¢n h√†ng</h3>
            <div id="banksList"></div>
            <div class="inline-form">
              <input
                class="inpNewBank focus-ring fade"
                id="inpNewBank"
                placeholder="T√™n ng√¢n h√†ng (VCB, TCB, ACB‚Ä¶)"
              />
              <button
                type="button"
                id="btnAddBank"
                class="btnAddBank focus-ring fade"
              >
                Th√™m
              </button>
            </div>
            <div class="inline-form">
              <label
                class="muted-sm"
                for="selDefaultBank"
                style="min-width: 120px"
                >M·∫∑c ƒë·ªãnh</label
              >
              <select
                class="selDefaultBank focus-ring fade"
                id="selDefaultBank"
              ></select>
            </div>
            <p class="muted-sm">
              * Ch·ªâ √°p d·ª•ng khi n∆°i l∆∞u tr·ªØ l√† ‚ÄúChuy·ªÉn kho·∫£n‚Äù.
            </p>
          </div>
        </div>

        <div class="settings-footer">
          <button
            id="btnCloseSettings"
            type="button"
            class="btnCancel focus-ring fade"
          >
            ƒê√≥ng
          </button>
        </div>
      </form>
    </dialog>
  </body>
</html>
